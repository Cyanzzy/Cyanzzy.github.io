---
title: JavaBasic-7-异常
date: 2023-03-16 18:56:40
tags: 
  - JavaBasic
categories: 
  - Language
swiper_index: 
---

# 异常处理

> Exception类的层次

![](https://cyan-images.oss-cn-shanghai.aliyuncs.com/images/01-java-basic-20230311-04.jpg)

> 异常概述

* 编译时异常是在编译成class文件时必须要处理的异常，也称为受检异常
* 运行时异常是在运行字节码文件时出现的异常，也称为非受检异常

> 虚拟机默认处理异常方式

* 在产生异常的代码处生成一个**异常对象**，接着查看是否有处理异常的代码，如果没有就交给调用者处理，如果调用者也不处理则最终交给虚拟机
* 虚拟机将异常的名称，异常原因以及异常出现的位置等信息输出在控制台
* 程序停止运行

> 使用`throws`处理异常

* 格式：`throws 异常类名`
* 注意：写在**方法的定义处**，表示显式声明一个异常
* 这种异常异常处理方式主要**用于编译时异常**，如果声明的异常是运行时异常则声明处的代码可以省略
* throws声明一个异常表示当前方法内不处理这个异常，而是交给**调用者**处理，如果调用者也不处理则**最终**交给虚拟机采用**默认**的处理方式

> 使用`throw`抛出异常对象

* 格式：`throw new 异常类名();`
* 注意：写在**方法内部**，表示在当前的代码处手动抛出一个异常，下面的代码不用再执行
* 给方法的调用者抛出了一个异常

> 使用`try...catch`处理异常

```java
try{
    // 可能出现异常的代码
}catch(异常类名 变量名){
    // 处理异常的代码
}
```

* 作用是可以让程序继续执行下去
* 如果try块中没有出现异常，则程序会将try块的代码执行完毕，然后跳过catch块的代码继续执行下去
* 如果try块中某行代码出现异常，则该行后面的代码不再执行转而去执行catch块中的代码，然后继续执行下去
* 如果try块中出现的异常没有被捕获，则直接在出现异常的代码处停止执行，将异常交给虚拟机处理，程序不再执行下去
* 如果try块中出现多个异常，那么只需要添加多个catch块处理，如果多个异常**存在继承关系**，那么父类catch块需要写在**最下方**，发生异常时只会匹配一个catch块
* 写多个catch块的好处是可以针对不同的异常有不同的处理方式

> Throwable成员方法

Throwable是所有异常类的父类，所以所有异常对象都能使用该类的方法

| 方法名                        | 说明                       |
| ----------------------------- | -------------------------- |
| public String getMessage()    | 返回详细消息字符串         |
| public String toString()      | 返回简短描述字符串         |
| public void printStackTrace() | 将异常信息打印输出在控制台 |

> 自定义异常

- 所有异常都必须是 Throwable 的子类。
- 如果希望写一个检查性异常类，则需要继承 Exception 类。
- 如果你想写一个运行时异常类，那么需要继承 RuntimeException 类。

```java
class MyException extends Exception{
}
```

> throws和throw对比

|        | 作用                 | 位置       | 后接对象 |
| ------ | -------------------- | ---------- | -------- |
| throws | 异常处理方式         | 方法声明处 | 异常类型 |
| throw  | 生成异常对象的关键字 | 方法体中   | 异常对象 |



